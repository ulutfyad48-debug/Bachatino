<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bachatino ‚Äì Online Shopping</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <style>
    /* --- General Styling --- */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background: #f4f6fa; color: #1e2b3c; }

    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      padding: 1rem 2rem;
      position: sticky; top: 0; z-index: 100;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px;
    }

    .logo {
      font-weight: 800; font-size: 1.5rem; color: #0b3b2c;
      display: flex; align-items: center; gap: 8px;
      letter-spacing: -0.5px;
    }

    .search-wrapper {
      flex: 1; max-width: 400px; position: relative;
    }
    .search-wrapper i {
      position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #aaa;
    }
    .search-box {
      width: 100%; padding: 12px 12px 12px 45px; border: 1px solid #e0e0e0;
      border-radius: 50px; outline: none; font-size: 0.95rem; transition: 0.3s;
    }
    .search-box:focus { border-color: #0b3b2c; box-shadow: 0 0 0 4px rgba(11, 59, 44, 0.1); }

    .products {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 25px; padding: 2rem; max-width: 1400px; margin: 0 auto;
    }

    .card {
      background: white; border-radius: 20px; padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05); transition: 0.3s;
      position: relative; overflow: hidden; display: flex; flex-direction: column;
      border: 1px solid rgba(0,0,0,0.04);
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.08); }

    .card img {
      width: 100%; height: 200px; object-fit: cover; border-radius: 15px;
      background: #f0f2f5;
    }

    /* Out of Stock Styling */
    .card.out-of-stock { opacity: 0.6; pointer-events: none; }
    .card.out-of-stock img { filter: grayscale(100%); }
    .stock-badge {
      position: absolute; top: 25px; right: 25px;
      background: #e74c3c; color: white; padding: 5px 12px;
      border-radius: 20px; font-size: 0.8rem; font-weight: bold;
      z-index: 10; display: none; box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
    }
    .card.out-of-stock .stock-badge { display: block; }

    .title { font-weight: 700; margin-top: 15px; font-size: 1.1rem; }
    .price { color: #0b3b2c; font-weight: 800; font-size: 1.25rem; margin: 8px 0; }

    .qty-control {
      display: flex; justify-content: space-between; align-items: center;
      background: #f1f5f9; border-radius: 30px; padding: 5px; margin-top: auto;
    }
    .qty-control button {
      width: 38px; height: 38px; border-radius: 50%; border: none;
      background: white; cursor: pointer; font-weight: bold; font-size: 1.2rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.2s;
    }
    .qty-control button:active { transform: scale(0.95); }

    /* --- New Cart Button Design & Position --- */
    .cart-float {
      position: fixed; bottom: 80px; right: 25px; /* Position moved up */
      background: linear-gradient(135deg, #0b3b2c, #1e5e4d);
      color: white; width: 65px; height: 65px;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-size: 1.7rem; cursor: pointer; 
      box-shadow: 0 10px 30px rgba(11, 59, 44, 0.4);
      z-index: 999; transition: transform 0.3s, box-shadow 0.3s;
    }
    .cart-float:hover { transform: scale(1.05); box-shadow: 0 15px 35px rgba(11, 59, 44, 0.5); }
    .cart-count-badge {
      position: absolute; top: -5px; right: -5px; background: #e74c3c; 
      color: white; width: 26px; height: 26px; font-size: 13px; font-weight: bold;
      border-radius: 50%; display: none; align-items: center; justify-content: center;
      border: 3px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    /* Popup */
    .popup-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
      display: none; justify-content: center; align-items: center; z-index: 1000;
    }
    .popup-box {
      background: white; width: 90%; max-width: 450px;
      padding: 30px; border-radius: 25px; text-align: center;
      position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.2);
    }
    
    .popup-box h3 { margin-bottom: 20px; color: #0b3b2c; font-weight: 800; }

    .input-group { margin: 15px 0; text-align: left; }
    .input-group label { font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; display: block; color: #555; }
    .input-group input, .input-group select {
      width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 12px;
      font-size: 1rem; outline: none; background: #f9f9f9; transition: 0.3s;
    }
    .input-group input:focus, .input-group select:focus {
      border-color: #0b3b2c; background: white;
    }

    .total-row {
      background: #f0fdf4; padding: 18px; border-radius: 15px; 
      display: flex; justify-content: space-between; font-weight: bold;
      color: #0b3b2c; border: 1px solid #dcfce7; margin-bottom: 25px; font-size: 1.1rem;
    }

    .btn {
      width: 100%; padding: 16px; border: none; border-radius: 12px;
      font-size: 1.05rem; font-weight: 600; cursor: pointer; display: flex;
      align-items: center; justify-content: center; gap: 10px; color: white;
      margin-bottom: 12px; transition: 0.2s;
    }
    .btn:hover { opacity: 0.9; transform: translateY(-2px); }
    .btn-wa { background: linear-gradient(135deg, #25D366, #1da851); box-shadow: 0 8px 20px rgba(37, 211, 102, 0.3); }
    .btn-email { background: linear-gradient(135deg, #3b82f6, #2563eb); box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3); }
    .btn-cancel { background: transparent; color: #777; margin-top: 5px; }
    .btn-cancel:hover { background: #f5f5f5; transform: none; }

  </style>
</head>
<body>

<header>
  <div class="logo"><i class="fas fa-shopping-basket"></i> Bachatino</div>
  <div class="search-wrapper">
    <i class="fas fa-search"></i>
    <input type="text" class="search-box" placeholder="Search products...">
  </div>
</header>

<div class="products" id="productContainer">
  </div>

<div class="cart-float" onclick="openCart()">
  <i class="fas fa-shopping-bag"></i>
  <span id="cartCount" class="cart-count-badge">0</span>
</div>

<div class="popup-overlay" id="popup">
  <div class="popup-box">
    <h3>Complete Your Order</h3>
    
    <div class="input-group">
      <label>Your Name</label>
      <input type="text" id="name" placeholder="Enter your full name">
    </div>
    <div class="input-group">
      <label>Phone / WhatsApp</label>
      <input type="tel" id="phone" placeholder="Enter mobile number">
    </div>
    <div class="input-group">
      <label>Delivery Location</label>
      <select id="delivery">
        <option value="pickup">Pickup (Free) ‚Äî üìç Tarnab Farm</option>
        <option value="peshawar">Peshawar ‚Äî Rs 99</option>
        <option value="kpk">KPK (Cities) ‚Äî Rs 100</option>
        <option value="other">Other Province ‚Äî Rs 150</option>
      </select>
    </div>

    <div class="total-row">
      <span>Total Amount:</span>
      <span id="totalAmount">Rs 0</span>
    </div>

    <button class="btn btn-wa" onclick="sendOrder('whatsapp')">
      <i class="fab fa-whatsapp"></i> Order via WhatsApp
    </button>

    <button class="btn btn-email" onclick="sendOrder('email')">
      <i class="fas fa-envelope"></i> Order via Email
    </button>

    <button class="btn btn-cancel" onclick="closeCart()">Cancel</button>
  </div>
</div>

<script>
  /* ======================================================
     SETTINGS (Edit Here)
  ====================================================== */
  const WHATSAPP_NUMBER = "923125540048"; 
  const MERCHANT_EMAIL = "ullahyad199@gmail.com"; 
  const PICKUP_ADDRESS = "Tarnab Farm, Peshawar, Mohalla Yakub Khan";

  /* ======================================================
     PRODUCT LIST
     Set 'inStock: false' to disable an item.
  ====================================================== */
  const PRODUCTS = [
    {
      id: 1,
      title: "Apple Juice",
      description: "Original pure apple juice box (1 Liter)",
      price: 250,
      image: "https://via.placeholder.com/300?text=Apple+Juice", 
      inStock: true
    },
    {
      id: 2,
      title: "Basmati Rice",
      description: "Premium quality long grain rice (1kg)",
      price: 350,
      image: "https://via.placeholder.com/300?text=Rice",
      inStock: true
    },
    {
      id: 3,
      title: "Cooking Oil",
      description: "High quality cooking oil (1 Liter pouch)",
      price: 500,
      image: "https://via.placeholder.com/300?text=Cooking+Oil",
      inStock: false // Example: Out of stock
    },
    {
      id: 4,
      title: "Another Product",
      description: "Just another item to show the scroll and button position.",
      price: 150,
      image: "https://via.placeholder.com/300?text=More+Items",
      inStock: true
    }
  ];

  /* --- Logic Code --- */
  const DELIVERY_CHARGES = { pickup: 0, peshawar: 99, kpk: 100, other: 150 };
  let cart = {}; 

  function displayProducts() {
    const container = document.getElementById("productContainer");
    container.innerHTML = PRODUCTS.map(p => {
      const isStock = p.inStock;
      const stockClass = isStock ? "" : "out-of-stock";
      
      return `
      <div class="card ${stockClass}">
        <span class="stock-badge">OUT OF STOCK</span>
        <img src="${p.image}" alt="${p.title}">
        <h4 class="title">${p.title}</h4>
        <p style="font-size:0.9rem; color:#666; flex-grow:1;">${p.description}</p>
        <div class="price">Rs ${p.price}</div>
        
        <div class="qty-control">
          <button onclick="changeQty(${p.id}, -1)">-</button>
          <span id="qty-${p.id}" style="font-weight:bold;">${cart[p.id] || 0}</span>
          <button onclick="changeQty(${p.id}, 1)">+</button>
        </div>
      </div>
    `}).join('');
  }

  window.changeQty = (id, delta) => {
    cart[id] = Math.max(0, (cart[id] || 0) + delta);
    document.getElementById(`qty-${id}`).innerText = cart[id];
    updateCartUI();
  };

  function updateCartUI() {
    let count = Object.values(cart).reduce((a, b) => a + b, 0);
    const badge = document.getElementById("cartCount");
    badge.innerText = count;
    badge.style.display = count > 0 ? "flex" : "none";
    calculateTotal();
  }

  function calculateTotal() {
    let subtotal = PRODUCTS.reduce((acc, p) => acc + (p.price * (cart[p.id] || 0)), 0);
    let delivery = DELIVERY_CHARGES[document.getElementById("delivery").value];
    document.getElementById("totalAmount").innerText = `Rs ${subtotal + delivery}`;
    return { subtotal, total: subtotal + delivery };
  }

  document.getElementById("delivery").addEventListener("change", calculateTotal);

  window.openCart = () => { 
    calculateTotal();
    document.getElementById("popup").style.display = "flex"; 
  };
  
  window.closeCart = () => { document.getElementById("popup").style.display = "none"; };

  window.sendOrder = (method) => {
    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    
    if(!name || !phone) return alert("Please enter your Name and Phone Number.");

    let cartItems = PRODUCTS.filter(p => cart[p.id] > 0);
    if(cartItems.length === 0) return alert("Your cart is empty.");

    // Create Order Summary
    let itemsList = cartItems.map(p => `‚Ä¢ ${p.title} x ${cart[p.id]} (Rs ${p.price * cart[p.id]})`).join('\n');
    let calc = calculateTotal();
    let deliveryType = document.getElementById("delivery").options[document.getElementById("delivery").selectedIndex].text;
    
    let message = `üõí *New Order - Bachatino*\n\n` +
                  `üë§ *Customer:* ${name}\n` +
                  `üìû *Phone:* ${phone}\n\n` +
                  `üì¶ *Order Details:*\n${itemsList}\n\n` +
                  `üöö *Delivery:* ${deliveryType}\n` +
                  `üí∞ *Total Bill:* Rs ${calc.total}`;

    // Handle Sending
    if(method === 'whatsapp') {
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, '_blank');
    } 
    else if(method === 'email') {
      let subject = `New Order from ${name} - Bachatino`;
      // Convert newlines to %0D%0A for email body
      let body = message.replace(/\n/g, "%0D%0A"); 
      window.location.href = `mailto:${MERCHANT_EMAIL}?subject=${encodeURIComponent(subject)}&body=${body}`;
    }
  };

  // Initialize
  displayProducts();

</script>

</body>
</html>
